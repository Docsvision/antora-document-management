:update: documentmanagement

= Обновление приложения

include::webclient:ROOT:partial$excerpts.adoc[tags=what-changed]

[#conditions]
== Условия обновления

[WARNING]
====
При обновлении модуля будут перезаписаны настройки стандартных папок, поисковых запросов и представлений Приложения.
====

* Настройки созданных пользователем объектов не затрагиваются.
+
Если в настройки стандартных элементов Приложения были внесены изменения, которые нужно сохранить, экспортируйте их перед обновлением и импортируйте после обновления.
+
* Установка новой версии должна выполняться в нерабочее время. Потребуется остановка работы {dv} и обновление БД.
* При обновлении версия клиентского дистрибутива должна быть равной версии серверного дистрибутива.
* Если к новой версии приложения приложена инструкция по обновлению, следуйте ей.
* Если комплект обновления включает обновление для модуля {pl}, перейдите к инструкции, приведенной в xref:dev@platform:admin:update-module.adoc[документации модуля {pl}].

[#update]
== Порядок обновления

include::dev@platform:admin:partial$update.adoc[]
+
При выполнении данной операции в БД {dv} будут загружены стандартные настройки приложения {dm}.
+
include::dev@platform:admin:partial$client.adoc[]

// [#update-multiple]
// == Обновление нескольких модулей
//
// Если планируется обновлять несколько модулей, следующие действия следует выполнять один раз после установки новых версий всех модулей.
//
// [WARNING]
// ====
// Следующие действия приведут к загрузке стандартных настроек приложения _{dm}_ и модуля _{ad}_. Чтобы сохранить собственные изменения, обновите БД по инструкции <<update-no-overwrite,Обновление базы данных {dv} без перезаписи стандартных настроек>>, после чего перейдите к шагу 4.
// ====
//
// . Обновите модуль <<update,стандартным способом>> и дойдите до запуска программы _{cns}_.
// . Запустите _{cns}_. Программа будет запущена в режиме мастера настройки.
// +
// Пользователь, от имени которого запускается _{cns}_ должен являться администратором {dv}, а также входить в группы {dv} в Справочнике сотрудников: _{dv-dm-admins-dir}_, _{dv-ad-admins-dir}_ и _Системная для WF_.
// +
// . На странице _Базы данных_ выберите рабочую БД {dv}, установите переключатель в режим *Использовать выбранную в списке базу данных* и нажмите *Далее*.
// +
// .Обновление базы данных
// image::common:install-update-db-flag.png[Обновление базы данных]
// +
// . Будет предложено обновить базу данных до новой версии. Выберите вариант *ДА*.
// . На следующей странице не изменяйте выбор обновляемых библиотек карточек. Нажмите *Далее*.
// +
// .Обновление библиотеки карточек
// image::common:update-card-lib.png[Обновление библиотеки карточек]
// +
// . На странице _Параметры базы данных_ нажмите *Далее*. Появится запрос на подтверждение обновления -- согласитесь. Процесс обновления займет некоторое время.
// // . На странице настройки производительности и перезапуска IIS нажмите *Далее*.
// // +
// // include::dev@platform:console:db-update.adoc[tags=special]
// +
// . Подтвердите настройки Workflow и выйдите из мастера.
// . Обновите версию приложения на всех узлах кластера {dv}, СУБП и {wc}а.
// . Клиентские компоненты приложения на компьютерах пользователей будут обновлены автоматически при запуске {wincl}а.
// +
// Самостоятельно обновить клиентские компоненты можно из пакета установки `{dv} DocumentManagement client.msi`.

// [#update-no-overwrite]
// == Обновление базы данных {dv} без перезаписи стандартных настроек
//
// . Обновите модуль <<update,стандартным способом>>.
// . Перед запуском программы _{cns}_ измените в редакторе реестра Windows значение параметра `{hklm-dv}\Platform\Console\WizardMode` на `0`.
// . Откройте _{cns}_.
// +
// Пользователь, от имени которого запускается _{cns}_ должен являться администратором {dv}, а также входить в группы {dv} в Справочнике сотрудников: _{dv-dm-admins-dir}_, _{dv-ad-admins-dir}_ и _Системная для WF_.
// +
// . Перейдите в раздел настроек menu:Настройки сервера[Базы данных].
// . Нажмите кнопку *Мастер баз данных*. Будет открыто окно _Мастер БД {dv}_.
// . Выберите обновляемую БД. Переключите режим в значение *Обновить выбранную в списке базу данных*.
// . Выполните обновление стандартным образом (см. xref:dev@platform:console:db-update.adoc[документацию модуля {pl}]). На шаге выбора загружаемых модулей, откажитесь от загрузки модулей, настройки которых требуется сохранить.
// +
// . На шаге применения специальной конфигурации {dm}, нажмите кнопку *Пропустить*, чтобы сохранить стандартные настройки модуля.
